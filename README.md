# Simple_Socket_Tester
Generating random packets, sending them to the server and checking the response.
Was developed for testing sockets on stm32H743zi: [stm32H743ZI-playground](https://github.com/klimatt/stm32H743ZI-playground).
The server must echo all incoming data.
Currently, only TCP sockets are supported.
```sh
simple_socket_tester 0.1.0
USAGE:
    simple_socket_tester [OPTIONS]

OPTIONS:
    -a                          Print all data
    -c <connect_timeout>        Connecting timeout [ms]
    -d <loop_delay>             Sleep timeout between new attempt [ms]
    -h, --help                  Print help information
    -i <ip>                     Ip Address
    -m <max_packet_size>        Maximum packet size which can be generated by tester [bytes]
    -n                          Makes packets with random size in range = 0..max_packet_size
    -p <port>                   Port
    -r <read_timeout>           Socket read timeout [ms]
    -V, --version               Print version information
    -w <write_timeout>          Socket write timeout [ms]
```
Example command:
```sh
 cargo run --release -- -i 192.168.1.10 -p 1234 -m 900 -d 300 -c 200 -r 10 -w 10 -p -n 
```
Or: 
```sh
 cargo run --release -- -i 192.168.1.10 -p 1234
```
Default config: 
```sh
const READ_TIMEOUT:     u64 = 200;      //[ms]
const WRITE_TIMEOUT:    u64 = 200;      //[ms]
const LOOP_DELAY:       u64 = 0;        //[ms]
const CONNECT_TIMEOUT:  u64 = 100;      //[ms]
const MAX_PACKET_SIZE:  usize = 1500;   //[bytes]
```
Example Output:

![](show.gif)
